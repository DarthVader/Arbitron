# Arbitron

TODO:

Loader:

- [x] Протестировать заливку с OKEX и HitBTC (особенно HitBTC.BTC-USDT)
- [x] FixNullBytes запускать только при необходимости 
- [x] Конвертировать всё в UTC
- [x] Доделать загрузку OrderBook в CSV
- [x] Собрать железо (Саше +1)
- [x] Поднять ещё одну ноду дома (в докере) и одну на работе (под Ubuntu)
- [x] Тестирование вставки уникальных строк в history
- [x] Написать синхронизатор для воркеров. Нужно, чтобы они забирали данные по очереди, через равные промежутки времени. (Пауза между обращениями к источнику задаётся самим источником для каждого отдельного IP. Чтобы уменьшить эту паузу мы можем читать данные по-очереди каждым воркером. Надо создать механизм, управляющий запусками воркеров в нужные моменты времени)
- [ ] Добавить вычисление id по накопительному MD5/SHA1 для Cryptopia, Kraken и всех бирж, которые возвращают id=None из ccxt.fetch_trades()
- [ ] Отрезать лишние пары, по которым меньше 1 сделки в минуту
- [ ] Написать оптимизатор/менеджер очереди, который группировал бы задания для воркеров оптимальным образом, чтобы сократить время полного обновления всех пар всех бирж. Каждый воркер может выполнять параллельные запросы, но ограничением является минимально допустимое время между запросами к бирже. Желательно так же, чтобы одинаковые пары по возможности обновлялись вместе (нужно для арбитража).
- [ ] Динамическая перестройка работы воркеров/диспетчера "на лету" через базу данных (включение приоритетов, новые пары, изменения ratelimit, и т.д.)
- [ ] Переливка данных из CSV в Cassandra (load_history_from_folder.py)
- [ ] Дописать нормальное логгирование
- [ ] Order book. Пишем отдельные воркеры для Orderbook? Если эти воркеры работают на тех же IP, что собирают исторические данные, то нужно обратить внимание на то, что пауза между ними ОБЩАЯ!
- [ ] Загрузка в HDF5
- [ ] Spark/Kafka ?
- [ ] Резервный VPN
- [ ] Резервный RabbitMQ
- [ ] Добавить дни в history и сделать из низ партиции (то есть будет Exchange->Pair->Day). Это для быстрой выборки последних данных.

External packages:

cassandra-driver -- https://github.com/datastax/python-driver
ipgetter -- https://github.com/phoemur/ipgetter